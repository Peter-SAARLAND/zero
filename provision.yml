# @meta author: Fabian Peter
# @meta description: zero
# @meta email: fabian@peter.saarland
# @action provision # this action describes the installation  

---
  # @infrastructure
  # @network
  # @core
  # @engine
  # @orchestrator
  # @backplane
# @zero-infrastructure
- name: Enable AWS root access
  import_playbook: playbooks/aws.yml
  when: infrastructure_provider == "terraform"
# @zero-network
- import_playbook: playbooks/provision-network.yml
# @zero-core
- import_playbook: playbooks/provision-core.yml
  when: ansible_os_family != "Windows"
# @zero-engine
- import_playbook: playbooks/provision-engine.yml
# @zero-orchestrator
- import_playbook: playbooks/provision-swarm.yml
  when: swarm_enabled|bool
- import_playbook: playbooks/provision-kubernetes.yml
  when: kubernetes_enabled|bool
# @zero-data
- import_playbook: playbooks/provision-storidge.yml
  tags:
      - storidge
  when: storidge_enabled|bool
# @zero-backplane
- import_playbook: playbooks/provision-backplane.yml
  tags:
    - backplane
  when: backplane_enabled|bool
# @zero-module-runner
- import_playbook: playbooks/provision-runner.yml
  tags:
      - runner
  when: runner_enabled|bool